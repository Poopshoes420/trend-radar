<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Trend Radar</title>
    <meta http-equiv="refresh" content="300">
    <style>
      body { font-family: Arial, sans-serif; margin: 40px; }
      h1 { margin-bottom: 8px; }
      .meta { color:#666; margin-bottom: 20px; }
      li { margin-bottom: 12px; }
      .sources { color:#444; font-size: 0.9em; }
      .why { color:#666; font-size: 0.95em; }
    </style>
  </head>
  <body>
      <h1>Trend Radar</h1>
  <div class="meta">
  Auto-refreshes every 5 minutes —
  <span id="timer">05:00</span>
</div>
    
<script>
  let seconds = 300; // 5 minutes

  function updateTimer() {
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    document.getElementById("timer").textContent =
      `${String(m).padStart(2, "0")}:${String(s).padStart(2, "0")}`;
    seconds--;
  }

  setInterval(updateTimer, 1000);
  updateTimer();
</script>


  <h2>Reddit Trends</h2>
  <ol id="reddit">Loading Reddit…</ol>

  <h2>YouTube Trends</h2>
  <ol id="youtube">Loading YouTube…</ol>

  <script>
    const ENDPOINT = "https://poopshoes420.github.io/trend-radar/data/trends.json";

    fetch(ENDPOINT, { cache: "no-store" })
      .then(res => res.json())
      .then(items => {
        const redditList = document.getElementById("reddit");
        const youtubeList = document.getElementById("youtube");

        const redditItems = items.filter(t => t.sources && t.sources.includes("reddit"));
        const youtubeItems = items.filter(t => t.sources && t.sources.includes("youtube"));

        redditList.innerHTML = redditItems.map(t => `
          <li>
            <strong>
              <a href="${t.exampleUrl}" target="_blank" rel="noopener noreferrer">
                ${t.topic}
              </a>
            </strong><br>
            <div class="why">${t.why}</div>
          </li>
        `).join("");

        youtubeList.innerHTML = youtubeItems.map(t => `
          <li>
            <strong>
              <a href="${t.exampleUrl}" target="_blank" rel="noopener noreferrer">
                ${t.topic}
              </a>
            </strong><br>
            <div class="why">${t.why}</div>
          </li>
        `).join("");

        if (!redditItems.length) redditList.innerHTML = "<li>No Reddit trends right now</li>";
        if (!youtubeItems.length) youtubeList.innerHTML = "<li>No YouTube trends right now</li>";
      })
      .catch(() => {
        document.getElementById("reddit").innerText = "Failed to load Reddit trends.";
        document.getElementById("youtube").innerText = "Failed to load YouTube trends.";
      });
  </script>


  </body>
</html>
